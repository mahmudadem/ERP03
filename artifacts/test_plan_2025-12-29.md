# Manual Test Plan - December 29, 2025 Release

## Overview

This test plan covers the changes made in the December 29, 2025 development session. Execute all tests in order. Mark each step as ✅ PASS or ❌ FAIL.

---

## Pre-Test Setup

### Environment Verification

| Step | Action | Expected Result | Status |
|------|--------|-----------------|--------|
| 1 | Open terminal in `/backend` | Terminal ready | ☐ |
| 2 | Run `npm run build` | No TypeScript errors, build completes | ☐ |
| 3 | Start backend server | Server starts without errors | ☐ |
| 4 | Open terminal in `/frontend` | Terminal ready | ☐ |
| 5 | Run `npm run dev` | Vite dev server starts on port 5173 | ☐ |
| 6 | Open browser to `http://localhost:5173` | Login page loads | ☐ |
| 7 | Login with test credentials | Dashboard loads successfully | ☐ |

---

## Test Suite 1: Voucher List Page (Critical Bug Fix)

**Purpose:** Verify the `findByCompany is not a function` error is resolved.

### TC1.1: Load Voucher List
| Step | Action | Expected Result | Status |
|------|--------|-----------------|--------|
| 1 | Navigate to **Accounting → Vouchers** | Page loads without errors | ☐ |
| 2 | Check browser console (F12) | No JavaScript errors | ☐ |
| 3 | Verify voucher table displays | Table shows existing vouchers (or empty state) | ☐ |
| 4 | Check network tab | API call to `/tenant/accounting/vouchers` returns 200 | ☐ |

### TC1.2: Voucher List Interactions
| Step | Action | Expected Result | Status |
|------|--------|-----------------|--------|
| 1 | Click on any voucher row | Voucher details/editor opens | ☐ |
| 2 | Navigate back to voucher list | List reloads correctly | ☐ |
| 3 | Use date filter (if available) | Filtered results display | ☐ |

### TC1.3: Create New Voucher (Critical)
| Step | Action | Expected Result | Status |
|------|--------|-----------------|--------|
| 1 | Click "+ New Voucher" or equivalent button | Voucher form/modal opens | ☐ |
| 2 | Select voucher type (e.g., Journal Entry) | Form fields update for selected type | ☐ |
| 3 | Enter Date | Date field accepts input | ☐ |
| 4 | Enter Reference (optional) | Reference field accepts input | ☐ |
| 5 | Add first line - select Account (Debit) | Account dropdown shows accounts | ☐ |
| 6 | Enter Debit amount (e.g., 1000) | Amount field accepts numeric input | ☐ |
| 7 | Add second line - select Account (Credit) | Account dropdown shows accounts | ☐ |
| 8 | Enter Credit amount (same as debit, e.g., 1000) | Amount field accepts numeric input | ☐ |
| 9 | Click Save/Create | API call to POST `/tenant/accounting/vouchers` | ☐ |
| 10 | Verify response | 200 OK, voucher created successfully | ☐ |
| 11 | Check browser console | No errors in console | ☐ |
| 12 | Verify voucher appears in list | New voucher visible in voucher list | ☐ |

### TC1.4: Voucher Validation
| Step | Action | Expected Result | Status |
|------|--------|-----------------|--------|
| 1 | Create voucher with unbalanced lines | Error: "Voucher not balanced" | ☐ |
| 2 | Create voucher with less than 2 lines | Error: "Voucher must have at least 2 lines" | ☐ |
| 3 | Create voucher with missing account | Error: Account is required | ☐ |
| 4 | Create voucher with zero amount | Error: Amount must be positive | ☐ |



## Test Suite 2: Accounting Settings Page (UI Refactor)

**Purpose:** Verify the new vertical sidebar layout and all tab functionality.

### TC2.1: Page Load and Layout
| Step | Action | Expected Result | Status |
|------|--------|-----------------|--------|
| 1 | Navigate to **Accounting → Settings** | Page loads without errors | ☐ |
| 2 | Verify page title | "Accounting Settings" with subtitle displayed | ☐ |
| 3 | Verify layout structure | Left sidebar (vertical tabs) + Right content area | ☐ |
| 4 | Count sidebar tabs | 6 tabs visible: General Settings, Policy Configuration, Approval System, Cost Center Required, Policy Error Mode, Fiscal Year | ☐ |
| 5 | Verify "Save Changes" button | Located in top-right header, disabled if no changes | ☐ |

### TC2.2: General Settings Tab
| Step | Action | Expected Result | Status |
|------|--------|-----------------|--------|
| 1 | Click "General Settings" in sidebar | Tab content displays with 3 sections | ☐ |
| 2 | Verify **Timezone** section | Dropdown with timezone options (UTC, Europe/Istanbul, etc.) | ☐ |
| 3 | Change timezone selection | Dropdown value updates | ☐ |
| 4 | Verify **Date Format** section | 4 radio buttons with format options | ☐ |
| 5 | Check date format examples | Each format shows CORRECT example:<br>• DD/MM/YYYY → `29/12/2025`<br>• YYYY-MM-DD → `2025-12-29`<br>• MM/DD/YYYY → `12/29/2025`<br>• DD.MM.YYYY → `29.12.2025` | ☐ |
| 6 | Select different date format | Radio button selection updates | ☐ |
| 7 | Verify **Interface Style** section | Two buttons: "Classic" and "Windows (V3)" | ☐ |
| 8 | Click "Classic" button | Selection highlights with indigo border | ☐ |
| 9 | Click "Windows (V3)" button | Selection changes to Windows | ☐ |
| 10 | Verify "Save Changes" button | Now ENABLED (has pending changes) | ☐ |

### TC2.3: Policy Configuration Tab
| Step | Action | Expected Result | Status |
|------|--------|-----------------|--------|
| 1 | Click "Policy Configuration" in sidebar | Tab content displays with 2 policy cards | ☐ |
| 2 | Verify **Period Lock** card | Toggle switch with ON/OFF label visible | ☐ |
| 3 | Toggle Period Lock ON | Switch turns indigo, "ON" label appears | ☐ |
| 4 | Verify date picker appears | "Locked Through Date" input becomes visible | ☐ |
| 5 | Select a date | Date value is set | ☐ |
| 6 | Toggle Period Lock OFF | Switch returns to gray, date picker hides | ☐ |
| 7 | Verify **Account Access Control** card | Toggle switch + info banner visible | ☐ |
| 8 | Toggle Account Access ON | Switch turns indigo | ☐ |
| 9 | Toggle Account Access OFF | Switch returns to gray | ☐ |

### TC2.4: Approval System Tab
| Step | Action | Expected Result | Status |
|------|--------|-----------------|--------|
| 1 | Click "Approval System" in sidebar | Tab content displays | ☐ |
| 2 | Verify **Approval Required** card | Toggle switch with warning banner | ☐ |
| 3 | Toggle Approval Required ON | Switch turns indigo, "ON" label | ☐ |
| 4 | Toggle Approval Required OFF | Switch returns to gray | ☐ |

### TC2.5: Cost Center Required Tab
| Step | Action | Expected Result | Status |
|------|--------|-----------------|--------|
| 1 | Click "Cost Center Required" in sidebar | Tab content displays | ☐ |
| 2 | Toggle Enforce Cost Centers ON | Switch turns indigo | ☐ |
| 3 | Verify account type checkboxes appear | 4 checkboxes: EXPENSE, ASSET, LIABILITY, REVENUE | ☐ |
| 4 | Check "EXPENSE" checkbox | Checkbox becomes checked | ☐ |
| 5 | Check "REVENUE" checkbox | Both checkboxes checked | ☐ |
| 6 | Uncheck "EXPENSE" checkbox | Only REVENUE remains checked | ☐ |
| 7 | Toggle Enforce Cost Centers OFF | Checkboxes hide | ☐ |

### TC2.6: Policy Error Mode Tab
| Step | Action | Expected Result | Status |
|------|--------|-----------------|--------|
| 1 | Click "Policy Error Mode" in sidebar | Tab content displays | ☐ |
| 2 | Verify two radio options | FAIL_FAST (with "Recommended" badge) and AGGREGATE | ☐ |
| 3 | Select FAIL_FAST | Option highlights with indigo border | ☐ |
| 4 | Select AGGREGATE | Selection changes to AGGREGATE | ☐ |
| 5 | Select FAIL_FAST again | Selection returns to FAIL_FAST | ☐ |

### TC2.7: Fiscal Year Tab
| Step | Action | Expected Result | Status |
|------|--------|-----------------|--------|
| 1 | Click "Fiscal Year" in sidebar | Tab content displays | ☐ |
| 2 | Verify placeholder content | "Under Construction" message with icon | ☐ |

### TC2.8: Save Settings Flow
| Step | Action | Expected Result | Status |
|------|--------|-----------------|--------|
| 1 | Make any setting change | "Save Changes" button becomes enabled | ☐ |
| 2 | Click "Save Changes" | Button shows loading spinner | ☐ |
| 3 | Wait for save to complete | Success toast appears OR check console for API call | ☐ |
| 4 | Refresh the page | Settings persist (values remain as saved) | ☐ |

### TC2.9: Mobile Responsiveness
| Step | Action | Expected Result | Status |
|------|--------|-----------------|--------|
| 1 | Open browser DevTools (F12) | DevTools panel opens | ☐ |
| 2 | Toggle device toolbar (Ctrl+Shift+M) | Mobile view activated | ☐ |
| 3 | Set width to 375px (iPhone) | Sidebar hides, dropdown appears | ☐ |
| 4 | Click dropdown | All 6 tab options in dropdown | ☐ |
| 5 | Select "Approval System" | Tab content changes correctly | ☐ |
| 6 | Return to desktop width (>768px) | Sidebar reappears | ☐ |

---

## Test Suite 3: Integration Tests

### TC3.1: Settings + Voucher Integration
| Step | Action | Expected Result | Status |
|------|--------|-----------------|--------|
| 1 | Navigate to Settings → Enable "Approval Required" | Setting enabled | ☐ |
| 2 | Save changes | Save successful | ☐ |
| 3 | Navigate to Vouchers → Create new voucher | Voucher form opens | ☐ |
| 4 | Fill voucher and submit (if approval enabled) | Voucher created in PENDING status | ☐ |
| 5 | Navigate back to Settings → Disable "Approval Required" | Setting disabled | ☐ |
| 6 | Save changes | Save successful | ☐ |

### TC3.2: Policy Config API Verification
| Step | Action | Expected Result | Status |
|------|--------|-----------------|--------|
| 1 | Open Network tab in DevTools | Network tab active | ☐ |
| 2 | Navigate to Accounting Settings | Observe API calls | ☐ |
| 3 | Find GET `/tenant/accounting/policy-config` | Returns 200 with policy data | ☐ |
| 4 | Change a setting and save | PUT `/tenant/accounting/policy-config` returns 200 | ☐ |

---

## Test Suite 4: Error Handling

### TC4.1: Network Error Simulation
| Step | Action | Expected Result | Status |
|------|--------|-----------------|--------|
| 1 | Stop backend server | Server stopped | ☐ |
| 2 | Navigate to Accounting Settings | Error toast or fallback UI displayed | ☐ |
| 3 | Navigate to Vouchers | Error message displayed (not crash) | ☐ |
| 4 | Restart backend server | Server running | ☐ |
| 5 | Refresh pages | Pages load correctly | ☐ |

---

## Test Results Summary

| Suite | Total Tests | Passed | Failed | Notes |
|-------|-------------|--------|--------|-------|
| Pre-Test Setup | 7 | | | |
| Voucher List | 6 | | | |
| Settings Page | 35 | | | |
| Integration | 6 | | | |
| Error Handling | 5 | | | |
| **TOTAL** | **59** | | | |

---

## Sign-Off

| Role | Name | Date | Signature |
|------|------|------|-----------|
| Tester | | | |
| Developer | | | |
| QA Lead | | | |

---

## Bug Report Template

If any test fails, document using this template:

```
### Bug #XXX: [Short Description]

**Test Case:** TC#.#
**Severity:** Critical / High / Medium / Low
**Environment:** Browser, OS, Backend version

**Steps to Reproduce:**
1. 
2. 
3. 

**Expected Result:**


**Actual Result:**


**Screenshots/Logs:**


**Notes:**

```
